{
  "name": "tabletap",
  "version": "1.3.0",
  "description": "",
  "main": "src/index.ts",
  "scripts": {
    "tsc-build": "node ./hooks/version.js && tsc -p . && tsc-alias",
    "docker-build": "docker build -t tabletap:%npm_package_version% -t tabletap:latest .",
    "docker-db-stop": "(docker stop postgres || echo already stopped) && (docker rm postgres || echo already removed)",
    "docker-app-stop": "(docker stop -t 1 tabletap || echo already stopped) && (docker rm tabletap || echo already removed)",
    "docker-db-run": "docker run -it --name postgres -e POSTGRES_USER=tabletap -e POSTGRES_PASSWORD=tbtp --network=tablenet -p 5432:5432 -v /app/pg/:/var/lib/postgresql/data/ --log-opt max-size=100m --log-opt max-file=3 --restart=always -d postgres:latest",
    "docker-app-run": "docker run -it --name tabletap -e NODE_ENV=prod --network=tablenet -p 443:3000 -v /app/res/:/res/ -v /var/run/docker.sock:/var/run/docker.sock --log-opt max-size=100m --log-opt max-file=3 --restart=always -d tabletap:latest",
    "docker-stop": "npm run docker-app-stop",
    "docker-run": "npm run docker-app-run",
    "deploy-export": "docker save tabletap:latest -o ./docker_images/tabletap-latest.tar",
    "deploy-7z-delete": "powershell.exe -Command \"rm ./docker_images/tabletap-latest.7z\" || exit 0",
    "deploy-compress": "7z a ./docker_images/tabletap-latest.7z ./docker_images/tabletap-latest.tar",
    "deploy-send-image": "scp -i ./res/ssl/devops_ssh.key -C docker_images/tabletap-latest.7z root@tabletap:/app/docker_images/",
    "deploy-run-script": "ssh -i ./res/ssl/devops_ssh.key root@tabletap \"/app/devops_deploy.sh\"",
    "build": "npm run tsc-build && npm run docker-build",
    "start": "npm run docker-stop && npm run docker-run",
    "auto": "npm run build && npm run start",
    "deploy": "npm run deploy-export && npm run deploy-7z-delete && npm run deploy-compress && npm run deploy-send-image && npm run deploy-run-script",
    "full": "npm run auto && npm run deploy",
    "test": "echo hello"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "@types/body-parser": "^1.19.5",
    "@types/cors": "^2.8.17",
    "@types/express": "^4.17.21",
    "@types/express-session": "^1.18.0",
    "@types/morgan": "^1.9.9",
    "@types/multer": "^1.4.11",
    "@zerollup/ts-transform-paths": "^1.7.18",
    "ts-node": "^10.9.2",
    "tsc-alias": "^1.8.8",
    "tsconfig-paths": "^4.2.0",
    "ttypescript": "^1.5.15",
    "typescript": "^5.4.3"
  },
  "dependencies": {
    "body-parser": "^1.20.2",
    "class-transformer": "^0.5.1",
    "class-validator": "^0.14.1",
    "connect-typeorm": "^2.0.0",
    "cors": "^2.8.5",
    "dockerode": "^4.0.2",
    "express": "^4.19.2",
    "express-session": "^1.18.0",
    "morgan": "^1.10.0",
    "multer": "^1.4.5-lts.1",
    "pg": "^8.11.4",
    "reflect-metadata": "^0.2.2",
    "routing-controllers": "^0.10.4",
    "typeorm": "^0.3.20"
  }
}
